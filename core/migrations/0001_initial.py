# Generated by Django 5.2.7 on 2025-10-27 16:30

import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('catalog', '0001_initial'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='Page',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200, verbose_name='Заголовок')),
                ('slug', models.SlugField(max_length=200, unique=True, verbose_name='URL-идентификатор')),
                ('content', models.TextField(verbose_name='Содержимое')),
                ('meta_title', models.CharField(blank=True, max_length=60, verbose_name='Meta заголовок')),
                ('meta_description', models.CharField(blank=True, max_length=160, verbose_name='Meta описание')),
                ('meta_keywords', models.CharField(blank=True, max_length=200, verbose_name='Meta ключевые слова')),
                ('is_published', models.BooleanField(default=True, verbose_name='Опубликовано')),
                ('show_in_menu', models.BooleanField(default=False, verbose_name='Показывать в меню')),
                ('menu_order', models.PositiveIntegerField(default=0, verbose_name='Порядок в меню')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Создана')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Обновлена')),
            ],
            options={
                'verbose_name': 'Страница',
                'verbose_name_plural': 'Страницы',
                'ordering': ['menu_order', 'title'],
            },
        ),
        migrations.CreateModel(
            name='SiteSettings',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('site_name', models.CharField(default='PhoneShop', max_length=100, verbose_name='Название сайта')),
                ('site_description', models.TextField(blank=True, verbose_name='Описание сайта')),
                ('site_logo', models.ImageField(blank=True, null=True, upload_to='site/', verbose_name='Логотип сайта')),
                ('favicon', models.ImageField(blank=True, null=True, upload_to='site/', verbose_name='Иконка сайта')),
                ('contact_phone', models.CharField(blank=True, max_length=20, verbose_name='Телефон')),
                ('contact_email', models.EmailField(blank=True, max_length=254, verbose_name='Email')),
                ('contact_address', models.TextField(blank=True, verbose_name='Адрес')),
                ('social_vk', models.URLField(blank=True, verbose_name='VK')),
                ('social_telegram', models.URLField(blank=True, verbose_name='Telegram')),
                ('social_whatsapp', models.URLField(blank=True, verbose_name='WhatsApp')),
                ('default_currency', models.CharField(default='RUB', max_length=10, verbose_name='Валюта по умолчанию')),
                ('tax_rate', models.DecimalField(decimal_places=2, default=20.0, max_digits=5, verbose_name='Налоговая ставка (%)')),
                ('min_free_delivery_amount', models.DecimalField(decimal_places=2, default=3000.0, max_digits=10, verbose_name='Минимальная сумма для бесплатной доставки')),
                ('delivery_cost', models.DecimalField(decimal_places=2, default=300.0, max_digits=10, verbose_name='Стоимость доставки')),
                ('bonus_rate', models.DecimalField(decimal_places=2, default=1.0, max_digits=5, verbose_name='Бонусный процент (%)')),
                ('points_per_ruble', models.PositiveIntegerField(default=1, verbose_name='Баллов за рубль')),
                ('password_min_length', models.PositiveIntegerField(default=8, verbose_name='Минимальная длина пароля')),
                ('require_phone_verification', models.BooleanField(default=False, verbose_name='Требуется подтверждение телефона')),
                ('require_email_verification', models.BooleanField(default=False, verbose_name='Требуется подтверждение email')),
                ('google_analytics_id', models.CharField(blank=True, max_length=20, verbose_name='Google Analytics ID')),
                ('yandex_metrica_id', models.PositiveIntegerField(blank=True, null=True, verbose_name='Яндекс.Метрика ID')),
                ('maintenance_mode', models.BooleanField(default=False, verbose_name='Режим обслуживания')),
                ('allow_user_registration', models.BooleanField(default=True, verbose_name='Разрешить регистрацию')),
                ('allow_reviews', models.BooleanField(default=True, verbose_name='Разрешить отзывы')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Обновлен')),
            ],
            options={
                'verbose_name': 'Настройки сайта',
                'verbose_name_plural': 'Настройки сайта',
            },
        ),
        migrations.CreateModel(
            name='Slider',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200, verbose_name='Заголовок')),
                ('subtitle', models.CharField(blank=True, max_length=300, verbose_name='Подзаголовок')),
                ('description', models.TextField(blank=True, verbose_name='Описание')),
                ('image', models.ImageField(upload_to='slider/', verbose_name='Изображение')),
                ('link_url', models.URLField(blank=True, verbose_name='Ссылка')),
                ('link_text', models.CharField(blank=True, max_length=50, verbose_name='Текст ссылки')),
                ('is_active', models.BooleanField(default=True, verbose_name='Активен')),
                ('sort_order', models.PositiveIntegerField(default=0, verbose_name='Порядок сортировки')),
                ('text_color', models.CharField(default='#ffffff', help_text='HEX код цвета', max_length=7, verbose_name='Цвет текста')),
                ('overlay_opacity', models.DecimalField(decimal_places=2, default=0.5, help_text='От 0.0 до 1.0', max_digits=3, verbose_name='Непрозрачность наложения')),
                ('start_date', models.DateTimeField(blank=True, null=True, verbose_name='Дата начала')),
                ('end_date', models.DateTimeField(blank=True, null=True, verbose_name='Дата окончания')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Создан')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Обновлен')),
            ],
            options={
                'verbose_name': 'Слайд',
                'verbose_name_plural': 'Слайдер',
                'ordering': ['sort_order', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Banner',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200, verbose_name='Заголовок')),
                ('subtitle', models.CharField(blank=True, max_length=300, verbose_name='Подзаголовок')),
                ('description', models.TextField(blank=True, verbose_name='Описание')),
                ('image', models.ImageField(upload_to='banners/', verbose_name='Изображение')),
                ('link_url', models.URLField(blank=True, verbose_name='Ссылка')),
                ('link_text', models.CharField(blank=True, max_length=50, verbose_name='Текст ссылки')),
                ('banner_type', models.CharField(choices=[('main', 'Главный баннер'), ('promo', 'Промо-баннер'), ('category', 'Категорийный баннер'), ('product', 'Товарный баннер')], default='main', max_length=20, verbose_name='Тип баннера')),
                ('is_active', models.BooleanField(default=True, verbose_name='Активен')),
                ('sort_order', models.PositiveIntegerField(default=0, verbose_name='Порядок сортировки')),
                ('start_date', models.DateTimeField(blank=True, null=True, verbose_name='Дата начала')),
                ('end_date', models.DateTimeField(blank=True, null=True, verbose_name='Дата окончания')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Создан')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Обновлен')),
                ('category', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='banners', to='catalog.category')),
                ('product', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='banners', to='catalog.product')),
            ],
            options={
                'verbose_name': 'Баннер',
                'verbose_name_plural': 'Баннеры',
                'ordering': ['sort_order', '-created_at'],
            },
        ),
        migrations.CreateModel(
            name='ContactForm',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, verbose_name='Имя')),
                ('email', models.EmailField(max_length=254, verbose_name='Email')),
                ('phone', models.CharField(blank=True, max_length=20, verbose_name='Телефон')),
                ('subject', models.CharField(choices=[('general', 'Общий вопрос'), ('order', 'Вопрос по заказу'), ('return', 'Возврат товара'), ('technical', 'Техническая поддержка'), ('partnership', 'Сотрудничество'), ('other', 'Другое')], max_length=20, verbose_name='Тема')),
                ('message', models.TextField(verbose_name='Сообщение')),
                ('status', models.CharField(choices=[('new', 'Новое'), ('in_progress', 'В обработке'), ('answered', 'Отвечено'), ('closed', 'Закрыто')], default='new', max_length=20, verbose_name='Статус')),
                ('admin_response', models.TextField(blank=True, verbose_name='Ответ администратора')),
                ('responded_at', models.DateTimeField(blank=True, null=True, verbose_name='Отвечено')),
                ('ip_address', models.GenericIPAddressField(blank=True, null=True, verbose_name='IP адрес')),
                ('user_agent', models.CharField(blank=True, max_length=500, verbose_name='User Agent')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Создано')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Обновлено')),
                ('assigned_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='assigned_contacts', to=settings.AUTH_USER_MODEL)),
                ('responded_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='responded_contacts', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Сообщение',
                'verbose_name_plural': 'Сообщения',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Feedback',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('category', models.CharField(choices=[('bug', 'Ошибка'), ('feature', 'Новая функция'), ('improvement', 'Улучшение'), ('other', 'Другое')], max_length=20, verbose_name='Категория')),
                ('title', models.CharField(max_length=200, verbose_name='Заголовок')),
                ('description', models.TextField(verbose_name='Описание')),
                ('status', models.CharField(choices=[('new', 'Новая'), ('reviewing', 'На рассмотрении'), ('accepted', 'Принята'), ('rejected', 'Отклонена'), ('implemented', 'Реализована')], default='new', max_length=20, verbose_name='Статус')),
                ('admin_response', models.TextField(blank=True, verbose_name='Ответ администратора')),
                ('responded_at', models.DateTimeField(blank=True, null=True, verbose_name='Отвечено')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Создано')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Обновлено')),
                ('assigned_to', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='assigned_feedback', to=settings.AUTH_USER_MODEL)),
                ('responded_by', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='responded_feedback', to=settings.AUTH_USER_MODEL)),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='feedback', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Обратная связь',
                'verbose_name_plural': 'Обратная связь',
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='Notification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('notification_type', models.CharField(choices=[('order', 'Заказ'), ('payment', 'Платеж'), ('delivery', 'Доставка'), ('promotion', 'Акция'), ('system', 'Система')], max_length=20, verbose_name='Тип уведомления')),
                ('title', models.CharField(max_length=200, verbose_name='Заголовок')),
                ('message', models.TextField(verbose_name='Сообщение')),
                ('related_object_type', models.CharField(blank=True, max_length=50, verbose_name='Тип связанного объекта')),
                ('related_object_id', models.PositiveIntegerField(blank=True, null=True, verbose_name='ID связанного объекта')),
                ('is_read', models.BooleanField(default=False, verbose_name='Прочитано')),
                ('is_sent_email', models.BooleanField(default=False, verbose_name='Отправлено на email')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Создано')),
                ('read_at', models.DateTimeField(blank=True, null=True, verbose_name='Прочитано')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='notifications', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Уведомление',
                'verbose_name_plural': 'Уведомления',
                'ordering': ['-created_at'],
                'indexes': [models.Index(fields=['user', '-created_at'], name='core_notifi_user_id_1cc5b6_idx'), models.Index(fields=['user', 'is_read'], name='core_notifi_user_id_cb8f07_idx')],
            },
        ),
        migrations.CreateModel(
            name='SearchLog',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('session_key', models.CharField(blank=True, max_length=40, null=True, verbose_name='Ключ сессии')),
                ('query', models.CharField(max_length=200, verbose_name='Поисковый запрос')),
                ('filters', models.JSONField(blank=True, default=dict, verbose_name='Примененные фильтры')),
                ('results_count', models.PositiveIntegerField(default=0, verbose_name='Количество результатов')),
                ('searched_at', models.DateTimeField(auto_now_add=True, verbose_name='Поиск выполнен')),
                ('clicked_product', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='found_through_search', to='catalog.product')),
                ('user', models.ForeignKey(blank=True, null=True, on_delete=django.db.models.deletion.CASCADE, related_name='searches', to=settings.AUTH_USER_MODEL)),
            ],
            options={
                'verbose_name': 'Поисковый запрос',
                'verbose_name_plural': 'Поисковые запросы',
                'ordering': ['-searched_at'],
                'indexes': [models.Index(fields=['query'], name='core_search_query_48375e_idx'), models.Index(fields=['-searched_at'], name='core_search_searche_3ee4ef_idx')],
            },
        ),
    ]
